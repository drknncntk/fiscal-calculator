<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>FISCAL Index KarÅŸÄ±laÅŸtÄ±rÄ±cÄ±</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eef6f9;
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    h2 {
      color: #003366;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    select, input[type="text"] {
      width: 100%;
      padding: 6px;
      margin-top: 5px;
    }
    button {
      margin-top: 15px;
      padding: 8px 16px;
      background-color: #005580;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #results {
      margin-top: 30px;
    }
    canvas {
      margin-top: 30px;
      background: white;
      padding: 20px;
      border-radius: 10px;
    }
    .score-list {
      margin-top: 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h2>FISCAL Index HesaplayÄ±cÄ± ve KarÅŸÄ±laÅŸtÄ±rÄ±cÄ±</h2>

  <label>YÃ¶ntem AdÄ±</label>
  <input type="text" id="methodName" placeholder="Ã–rn: YÃ¶ntem A">

  <!-- GiriÅŸ SeÃ§imleri -->
  <div id="inputs">
    <label>F â€“ Fixed Cost</label>
    <select id="f">
      <option value="1">Sadece temel ekipmanlarla uygulanabilir</option>
      <option value="0.8">DÃ¼ÅŸÃ¼k maliyetli taÅŸÄ±nabilir cihazlar</option>
      <option value="0.6">Orta dÃ¼zey cihazlar (GC, HPLC)</option>
      <option value="0.4">YÃ¼ksek teknoloji cihazlar</option>
      <option value="0.2">PahalÄ± Ã¶zelleÅŸmiÅŸ sistemler</option>
      <option value="0">AÅŸÄ±rÄ± yÃ¼ksek yatÄ±rÄ±m maliyeti</option>
    </select>

    <label>I â€“ Incremental Cost</label>
    <select id="i">
      <option value="1">Numune baÅŸÄ± < 1 USD</option>
      <option value="0.8">1â€“3 USD</option>
      <option value="0.6">3â€“5 USD</option>
      <option value="0.4">5â€“10 USD</option>
      <option value="0.2">10â€“20 USD</option>
      <option value="0">> 20 USD</option>
    </select>

    <label>S â€“ Scalability</label>
    <select id="s">
      <option value="1">â‰¥ 100 numune/saat</option>
      <option value="0.8">20â€“100 numune/saat</option>
      <option value="0.6">5â€“20 numune/saat</option>
      <option value="0.4">1â€“5 numune/saat</option>
      <option value="0.2">Her analiz > 1 saat</option>
      <option value="0">Ã‡ok yavaÅŸ, Ã¶lÃ§eklenemez</option>
    </select>

    <label>C â€“ Consumables</label>
    <select id="c">
      <option value="1">Tamamen tekrar kullanÄ±labilir</option>
      <option value="0.8">Ã‡oÄŸu malzeme tekrar kullanÄ±labilir</option>
      <option value="0.6">Orta dÃ¼zeyde sarf</option>
      <option value="0.4">Tek kullanÄ±mlÄ±k malzemeler aÄŸÄ±rlÄ±klÄ±</option>
      <option value="0.2">PahalÄ± ve tek kullanÄ±mlÄ±k</option>
      <option value="0">YoÄŸun sarf kullanÄ±mÄ±</option>
    </select>

    <label>A â€“ Availability</label>
    <select id="a">
      <option value="1">Yerel pazarda kolay temin</option>
      <option value="0.8">KÃ¼resel yaygÄ±n</option>
      <option value="0.6">Ã–zel ama temin edilebilir</option>
      <option value="0.4">Nadir veya Ã¶zel sentezli</option>
      <option value="0.2">Uzun tedarik sÃ¼resi</option>
      <option value="0">Temin edilmesi zor</option>
    </select>

    <label>L â€“ Lifecycle Impact</label>
    <select id="l">
      <option value="1">BakÄ±m gerekmez, Ã§evreci</option>
      <option value="0.8">Kolay bakÄ±m</option>
      <option value="0.6">Orta dÃ¼zey eÄŸitim ve bakÄ±m</option>
      <option value="0.4">UzmanlÄ±k gerekir</option>
      <option value="0.2">YÃ¼ksek servis/atÄ±k maliyeti</option>
      <option value="0">Ciddi servis ve atÄ±k riski</option>
    </select>
  </div>

  <button onclick="addMethod()">YÃ¶ntem Ekle</button>
  <button onclick="resetPage()" style="background-color: #c0392b;">TÃ¼mÃ¼nÃ¼ Temizle</button>
  <button onclick="downloadPDF()">PDF Ä°ndir</button>

  <div id="results">
    <canvas id="fiscalChart" width="400" height="300"></canvas>
    <div class="score-list" id="scoreList"></div>
  </div>

  <script>
    let chart;
    let methods = [];
    const colors = ['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd', '#8c564b'];

    function addMethod() {
      const name = document.getElementById("methodName").value || `YÃ¶ntem ${methods.length + 1}`;
      const f = parseFloat(document.getElementById("f").value);
      const i = parseFloat(document.getElementById("i").value);
      const s = parseFloat(document.getElementById("s").value);
      const c = parseFloat(document.getElementById("c").value);
      const a = parseFloat(document.getElementById("a").value);
      const l = parseFloat(document.getElementById("l").value);
      const avg = ((f + i + s + c + a + l) / 6).toFixed(2);

      methods.push({ name, data: [f, i, s, c, a, l], avg });

      updateChart();
      updateScores();
      document.getElementById("methodName").value = "";
    }

    function updateChart() {
      const data = {
        labels: ['Fixed Cost', 'Incremental', 'Scalability', 'Consumables', 'Availability', 'Lifecycle'],
        datasets: methods.map((m, i) => ({
          label: m.name,
          data: m.data,
          borderColor: colors[i % colors.length],
          backgroundColor: colors[i % colors.length] + "44", // transparan arka plan
          borderWidth: 2
        }))
      };

      const config = {
        type: 'radar',
        data: data,
        options: {
          scales: {
            r: {
              suggestedMin: 0,
              suggestedMax: 1
            }
          }
        }
      };

      if (chart) chart.destroy();
      chart = new Chart(document.getElementById('fiscalChart'), config);
    }

    function updateScores() {
      let html = `<h3>YÃ¶ntem SkorlarÄ±</h3><ul>`;
      for (const m of methods) {
        let yorum = m.avg >= 0.8 ? "ğŸ’š MÃ¼kemmel" : m.avg >= 0.6 ? "ğŸ’› Uygun" : m.avg >= 0.4 ? "ğŸ§¡ SÄ±nÄ±rlÄ±" : "â¤ï¸ ZayÄ±f";
        html += `<li><strong>${m.name}:</strong> ${m.avg} â†’ ${yorum}</li>`;
      }
      html += `</ul>`;
      document.getElementById("scoreList").innerHTML = html;
    }

    function downloadPDF() {
      const element = document.getElementById("results");
      const opt = {
        margin: 5,
        filename: 'FISCAL_Index.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().from(element).set(opt).save();
    }
	
	function resetPage() {
		// TÃ¼m verileri temizle
		methods = [];

		// Grafik varsa yok et
		if (chart) chart.destroy();

		// Skor listesini ve giriÅŸleri temizle
		document.getElementById("scoreList").innerHTML = "";
		document.getElementById("methodName").value = "";

		// SeÃ§imleri ilk seÃ§eneÄŸe sÄ±fÄ±rla
		const selects = document.querySelectorAll("#inputs select");
		selects.forEach(sel => sel.selectedIndex = 0);
	}
  </script>

</body>
</html>
